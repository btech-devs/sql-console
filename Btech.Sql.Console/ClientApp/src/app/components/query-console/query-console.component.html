<div class="query__navigation">
    <button (pointerdown)="this.isSidebar = !this.isSidebar"
            [ngClass]="this.isSidebar ? 'btn-secondary' : 'btn-outline-secondary'"
            class="btn p-1 query__navigation-item btn-sm">
        <i class="bi bi-database-fill-gear text-sm"></i>
        <span class="query__navigation-text">Database</span>
    </button>
</div>
<div class="container">
    <div class="row align-items-lg-stretch flex-lg-nowrap">
        <div class="query__main col order-1 mt-lg-0"
             #queryMain
             [ngClass]="{'col-12': !this.isSidebar, 'col-xs-12 col-lg-9 mt-3': this.isSidebar}">
            <div resizable
                 [minHeight]="300"
                 [maxHeight]="800"
                 class="row">
                <div class="col-12">
                    <div class="text-box__wrapper box-shadow">
                        <textarea #textArea
                                  class="text-box__query">
                        </textarea>

                        <ng-template #queryGutter
                                     let-isSelect="isSelect"
                                     let-startLine="startLine"
                                     let-endLine="endLine"
                                     let-queryIndex="queryIndex">
                            <div class="queryGutter">
                                <button *ngIf="isSelect != true"
                                        class="codeMirror__gutter-query-button"
                                        title="Execute selected query"
                                        (click)="this.execute(queryIndex)"
                                        (mouseenter)="this.addLineSelection(startLine, endLine)"
                                        (mouseleave)="this.removeLineSelection()">
                                    <i class="bi bi-caret-right-fill"></i>
                                </button>

                                <div *ngIf="isSelect == true"
                                     class="btn-group dropend">
                                    <button class="codeMirror__gutter-query-button"
                                            type="button"
                                            title="Open actionbar"
                                            data-bs-toggle="dropdown"
                                            aria-expanded="false"
                                            (mouseenter)="this.addLineSelection(startLine, endLine)"
                                            (mouseleave)="this.removeLineSelection()">
                                        <i class="bi bi-caret-right-fill"></i>
                                    </button>
                                    <ul class="dropdown-menu">
                                        <li>
                                            <button class="dropdown-item"
                                                    (click)="this.execute(queryIndex)">
                                                Execute
                                                <i class="bi bi-caret-right-fill"></i>
                                            </button>
                                        </li>
                                        <li>
                                            <button class="dropdown-item"
                                                    (click)="this.execute(queryIndex, true)">
                                                Execute at new tab
                                                <i class="bi bi-file-earmark-plus"></i>
                                            </button>
                                        </li>
                                        <li>
                                            <button class="dropdown-item"
                                                    (click)="this.dsvExporter?.openExecuteToDsvModal(this.getQuerySql(queryIndex), this.selectedDatabase?.name)">
                                                Execute to DSV
                                                <i class="bi bi-filetype-csv"></i>
                                            </button>
                                        </li>
                                    </ul>
                                </div>
                            </div>

                        </ng-template>

                        <div class="info-panel__wrapper d-none d-lg-block">
                            <div hidden
                                 #InfoPopover>
                                <div class="d-flex flex-nowrap justify-content-between">
                                    <span class="bg-secondary text-nowrap text-white rounded-1 px-1 fw-bold text-nowrap me-2">
                                        {{this.isMacOs ? 'Option' : 'Alt'}} + ArrowUp
                                    </span>
                                    <span class="text-nowrap">Move line up</span>
                                </div>
                                <div class="d-flex flex-nowrap justify-content-between mt-1">
                                    <span class="bg-secondary text-white rounded-1 px-1 fw-bold text-nowrap me-2">
                                        {{this.isMacOs ? 'Option' : 'Alt'}} + ArrowDown
                                    </span>
                                    <span class="text-nowrap">Move line down</span>
                                </div>
                                <div class="d-flex flex-nowrap justify-content-between mt-1">
                                    <span class="bg-secondary text-white rounded-1 px-1 fw-bold text-nowrap me-2">Shift + Space</span>
                                    <span class="text-nowrap">Show hints</span>
                                </div>
                                <div class="d-flex flex-nowrap justify-content-between mt-1">
                                    <span class="bg-secondary text-white rounded-1 px-1 fw-bold text-nowrap me-2">Ctrl + /</span>
                                    <span class="text-nowrap">Comment line</span>
                                </div>
                                <div class="d-flex flex-nowrap justify-content-between mt-1">
                                    <span class="bg-secondary text-white rounded-1 px-1 fw-bold text-nowrap me-2">Ctrl + D</span>
                                    <span class="text-nowrap">Duplicate line</span>
                                </div>
                                <div class="d-flex flex-nowrap justify-content-between mt-1">
                                    <span class="bg-secondary text-white rounded-1 px-1 fw-bold text-nowrap me-2">Ctrl + Y</span>
                                    <span class="text-nowrap">Delete line</span>
                                </div>
                                <div class="d-flex flex-nowrap justify-content-between mt-1">
                                    <span class="bg-secondary text-white rounded-1 px-1 fw-bold text-nowrap me-2">{{this.isMacOs ? 'Option' : 'Alt'}}
                                        + Enter</span>
                                    <span class="text-nowrap">Execute</span>
                                </div>

                                <p class="mt-2 mb-0">Other key bindings specified at
                                    <a href="https://codemirror.net/docs/ref/#commands"
                                       target="_blank">
                                        CodeMirror Commands
                                    </a>
                                </p>
                            </div>
                            <button data-bs-toggle="popover"
                                    data-bs-placement="top"
                                    data-bs-custom-class="mw-100"
                                    [attr.data-bs-content]="InfoPopover.innerHTML"
                                    title="Key bindings"
                                    class="btn btn-outline-secondary info-panel__opener">
                                ?
                            </button>

                        </div>
                    </div>
                </div>
            </div>

            <div class="row mt-3">
                <div class="col-12 d-flex">
                    <div class="actionbar">
                        <div class="btn-group me-2">
                            <button [disabled]="this.isExecuting || this.rawQuery.length == 0 || this.isFetchingInstanceData"
                                    (click)="this.execute()"
                                    type="button"
                                    class="btn btn-outline-success">
                                <i *ngIf="!this.isExecuting && !this.isFetchingInstanceData"
                                   class="bi bi-caret-right-fill me-1">
                                </i>
                                <span *ngIf="!this.isExecuting && !this.isFetchingInstanceData">Execute</span>

                                <span *ngIf="this.isExecuting || this.isFetchingInstanceData"
                                      class="spinner-grow spinner-grow-sm me-1"
                                      role="status"
                                      aria-hidden="true">
                                </span>
                                <span *ngIf="this.isExecuting || this.isFetchingInstanceData">Executing...</span>
                            </button>
                            <button [disabled]="this.isExecuting || this.rawQuery.length == 0 || this.isFetchingInstanceData"
                                    type="button"
                                    class="btn btn-outline-success rounded-end"
                                    data-bs-toggle="dropdown"
                                    data-bs-autoClose="true"
                                    data-bs-config='{"display": "static"}'
                                    aria-expanded="true">
                                <i class="bi bi-chevron-compact-down"></i>
                            </button>
                            <ul class="dropdown-menu"
                                role="menu"
                                data-popper-placement="bottom-start">
                                <li>
                                    <button class="dropdown-item"
                                            (click)="this.execute(undefined, true)">
                                        Execute at new tab
                                        <i class="bi bi-file-earmark-plus"></i>
                                    </button>
                                </li>
                                <li>
                                    <button [disabled]="!this.anyValidSelect"
                                            class="dropdown-item"
                                            (click)="dsvExporterComponent.openExecuteToDsvModal(this.getQuerySql(this.lastSelectQueryIndex), this.selectedDatabase!.name)">
                                        Export to DSV
                                        <i class="bi bi-filetype-csv"></i>
                                    </button>
                                </li>
                            </ul>
                        </div>
                        <button [hidden]="this.anyValidSelect < 2"
                                data-bs-toggle="popover"
                                data-bs-placement="top"
                                data-bs-trigger="click hover"
                                data-bs-content="The result will only be saved for the last 'SELECT' query."
                                class="btn me-2 lh-sm btn-outline-warning rounded-circle">
                            !
                        </button>
                        <div class="d-inline-block">
                            <button [disabled]="this.isExecuting || this.isFetchingInstanceData || sqlImporter.isImporting || dsvImporter.isImporting"
                                    type="button"
                                    class="btn btn-outline-success"
                                    data-bs-toggle="dropdown"
                                    data-bs-autoClose="true"
                                    data-bs-popper-config='{"placement": "bottom-start", "strategy":"fixed"}'
                                    aria-expanded="true">
                                Import
                                <i class="bi bi-chevron-compact-down"></i>
                            </button>
                            <ul class="dropdown-menu"
                                role="menu"
                                data-popper-placement="bottom-start">
                                <li>
                                    <button
                                            [disabled]="!this.selectedDatabase?.name"
                                            class="dropdown-item"
                                            (click)="sqlImporter.show()">
                                        Import SQL file
                                        <i class="bi bi-filetype-sql"></i>
                                    </button>
                                </li>
                                <li>
                                    <button
                                            [disabled]="!this.selectedDatabase?.name"
                                            class="dropdown-item"
                                            (click)="dsvImporter.show()">
                                        Import DSV file
                                        <i class="bi bi-filetype-sql"></i>
                                    </button>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="setting-bar ms-auto">
                        <div class="setting-bar__select">
                            <button (click)="selectMenu.hidden = !selectMenu.hidden"
                                    class="btn btn-outline-secondary text-nowrap"
                                    type="button">
                                <span>
                                    Query limit
                                    <span class="setting-bar__select-value">{{this.queryLimit ?? "None"}}</span>
                                </span>
                                <i class="bi"
                                   [ngClass]="selectMenu.hidden ? 'bi-chevron-compact-down' : 'bi-chevron-compact-up'">
                                </i>
                            </button>
                            <ul class="setting-bar__select-menu box-shadow"
                                #selectMenu
                                hidden>
                                <li class="setting-bar__select-item__wrapper">
                                    <button class="setting-bar__select-item"
                                            (click)="this.selectLimit(selectMenu, undefined)">
                                        None
                                    </button>
                                </li>
                                <li class="setting-bar__select-item__wrapper">
                                    <button class="setting-bar__select-item"
                                            (click)="this.selectLimit(selectMenu, 1)">
                                        1
                                    </button>
                                </li>
                                <li class="setting-bar__select-item__wrapper">
                                    <button class="setting-bar__select-item"
                                            (click)="this.selectLimit(selectMenu, 100)">
                                        100
                                    </button>
                                </li>
                                <li class="setting-bar__select-item__wrapper">
                                    <button class="setting-bar__select-item"
                                            (click)="this.selectLimit(selectMenu, 1000)">
                                        1000
                                    </button>
                                </li>
                                <li class="setting-bar__select-item__wrapper">
                                    <input placeholder="Enter limit..."
                                           class="setting-bar__select-input"
                                           [value]="this.queryLimit"
                                           (change)="this.selectLimit(selectMenu, selectInput.value, false)"
                                           #selectInput
                                           type="number">
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <div resizable
                 [minHeight]="300"
                 [maxHeight]="800"
                 class="row mt-3">
                <div class="col-12 h-100">
                    <div class="output tab-content box-shadow">
                        <div class="tab-pane active"
                             id="console"
                             role="tabpanel"
                             aria-labelledby="console-tab">
                            <div class="output__console font-monospace d-flex flex-column-reverse">
                                <div *ngFor="let consoleRow of this.console.consoleRowList.slice().reverse()"
                                     class="output__console-row">
                                    <span *ngIf="consoleRow.severity != 'separator'"
                                          copied
                                          class="output__console-datetime">
                                        <span class="d-none d-md-inline">{{consoleRow.messageTime | date:"[yyyy-MM-dd HH:mm:ss]"}}</span>
                                        <span class="d-md-none">{{consoleRow.messageTime | date:"[HH:mm:ss]"}}</span>
                                    </span>
                                    <span *ngIf="consoleRow.severity != 'separator'"
                                          copied
                                          class="output__console-message"
                                          [ngClass]="consoleRow.severity.length > 0 ? 'text-' + consoleRow.severity : ''">
                                        {{consoleRow.message}}
                                    </span>
                                    <hr *ngIf="consoleRow.severity == 'separator'"
                                        class="output__console-separator">
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane"
                             id="tableview"
                             role="tabpanel"
                             aria-labelledby="tableview-tab">
                            <div *ngIf="this.isExecuting"
                                 class="spinner-grow output__table-spinner"
                                 role="status">
                                <span class="sr-only">Loading...</span>
                            </div>
                            <div class="output__table-wrapper"
                                 [ngClass]="{'output__table-wrapper--popup': tableViewPopupState}">
                                <div (click)="tableViewPopupState = !tableViewPopupState"
                                     class="output__table-closer"
                                     [hidden]="!tableViewPopupState">
                                </div>

                                <div class="output__table font-monospace"
                                     [ngClass]="{'output__table--popup': tableViewPopupState}">
                                    <div class="output__table-actionbar btn-toolbar align-items-start p-1">
                                        <div class="btn-group btn-group-sm">
                                            <button class="btn btn-outline-secondary rounded-1"
                                                    type="button"
                                                    data-bs-toggle="dropdown"
                                                    data-bs-boundary="viewport"
                                                    aria-expanded="false">
                                                <i class="bi bi-save"></i>
                                                Export
                                                <i class="bi bi-chevron-compact-down"></i>
                                            </button>
                                            <ul class="dropdown-menu">
                                                <li>
                                                    <button class="dropdown-item"
                                                            (click)="dsvExporterComponent.openExportToDsvModal(this.results[this.selectedTableIndex])">
                                                        Export to DSV
                                                        <i class="bi bi-filetype-csv"></i>
                                                    </button>
                                                </li>
                                            </ul>
                                        </div>

                                        <div *ngIf="results.length > 1"
                                             class="btn-group btn-group-sm result-navigation ms-2">
                                            <button *ngFor="let table of results; let tableIndex = index"
                                                    class="btn btn-outline-secondary"
                                                    [ngClass]="{'active' : tableIndex == this.selectedTableIndex}"
                                                    (click)="this.selectedTableIndex = tableIndex"
                                                    type="button">
                                                {{table.name}}
                                                <i [hidden]="tableIndex == 0"
                                                   class="bi bi-x-circle cursor-pointer result-closer"
                                                   (click)="this.closeResultTab(tableIndex)">
                                                </i>
                                            </button>
                                        </div>

                                        <div class="btn-group btn-group-sm ms-auto ms-2">
                                            <button (click)="tableViewPopupState = !tableViewPopupState"
                                                    class="btn btn-outline-secondary output__table-opener"
                                                    [title]="tableViewPopupState ? 'Collapse' : 'Expand'">
                                                <i class="bi bi-arrows-angle-expand"
                                                   [ngClass]="{'bi-arrows-angle-contract': tableViewPopupState,'bi-arrows-angle-expand': !tableViewPopupState}">
                                                </i>
                                            </button>
                                        </div>
                                    </div>

                                    <div class="tab-content h-100">
                                        <div *ngFor="let table of results; let tableIndex = index"
                                             [ngClass]="{'show active': tableIndex == this.selectedTableIndex}"
                                             class="tab-pane h-100">

                                            <div class="output__table-result">
                                                <table class="table table-bordered w-100">
                                                    <thead>
                                                        <tr>
                                                            <th *ngFor="let column of table.header"
                                                                scope="col">
                                                                <span copied>{{column.columnName}}</span>
                                                            </th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr *ngFor="let row of table.body"
                                                            class="output__table-row">
                                                            <td class="output__table-column"
                                                                *ngFor="let column of row">
                                                                <span [ngClass]="{'output__table-column-value--expandable': column.isExpandable && !column.expanded}"
                                                                      class="output__table-column-value">
                                                                    <span copied>{{column.value}}</span>
                                                                </span>

                                                                <button title="{{column.expanded ? 'Collapse' : 'Expand'}}"
                                                                        (click)="column.expanded = !column.expanded"
                                                                        *ngIf="column.isExpandable"
                                                                        class="output__table-column-opener">
                                                                    <i class="bi bi-three-dots"></i>
                                                                </button>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row mt-3 align-items-center">
                <div class="col-12 h-auto">
                    <ul class="nav nav-pills d-inline-flex flex-nowrap"
                        role="tablist">
                        <li class="nav-item"
                            role="presentation">
                            <button #consoleHandle
                                    class="btn btn-outline-secondary active"
                                    data-bs-toggle="tab"
                                    data-bs-target="#console"
                                    type="button"
                                    role="tab"
                                    aria-selected="true">
                                Console
                            </button>
                        </li>
                        <li class="nav-item"
                            role="presentation">
                            <button #resultHandle
                                    class="btn btn-outline-secondary"
                                    data-bs-toggle="tab"
                                    data-bs-target="#tableview"
                                    type="button"
                                    role="tab"
                                    aria-selected="false">
                                Result
                            </button>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div resizableCol
             (onResize)="this.onResizeSidebar($event)"
             [maxWidth]="60"
             [minWidth]="25"
             class="query__sidebar order-0 order-lg-2 col-12"
             [hidden]="!this.isSidebar"
             [ngClass]="{'query__sidebar--opened': this.isSidebar}"
             #querySidebar>
            <div class="row">
                <div class="col-12">
                    <div class="query__sidebar-section box-shadow">
                        <button title="Reconnect to the instance"
                                (click)="this.reconnectToTheInstance()"
                                class="btn btn-sm p-1 py-0 btn-outline-secondary fs-6 query__sidebar-reconnect-button">
                            <svg xmlns="http://www.w3.org/2000/svg"
                                 width="16"
                                 height="16"
                                 fill="currentColor"
                                 class="bi bi-arrow-clockwise"
                                 viewBox="0 0 16 16">
                                <path fill-rule="evenodd"
                                      d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>
                                <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/>
                            </svg>
                        </button>
                        <p class="text-center">Database</p>
                        <div *ngIf="this.host"
                             class="overflow-hidden text-center">
                                <span class="fst-italic text-secondary text-nowrap"
                                      copied>
                                    {{this.host}}
                                </span>
                        </div>
                        <hr>
                        <div class="btn-group btn-group-sm d-flex flex-nowrap database-picker__wrapper mb-3"
                             role="group">
                            <i class="border-1 border-secondary database-picker__icon">
                                <svg xmlns="http://www.w3.org/2000/svg"
                                     width="16"
                                     height="16"
                                     fill="currentColor"
                                     class="bi bi-database"
                                     viewBox="0 0 16 16">
                                    <path d="M4.318 2.687C5.234 2.271 6.536 2 8 2s2.766.27 3.682.687C12.644 3.125 13 3.627 13 4c0 .374-.356.875-1.318 1.313C10.766 5.729 9.464 6 8 6s-2.766-.27-3.682-.687C3.356 4.875 3 4.373 3 4c0-.374.356-.875 1.318-1.313ZM13 5.698V7c0 .374-.356.875-1.318 1.313C10.766 8.729 9.464 9 8 9s-2.766-.27-3.682-.687C3.356 7.875 3 7.373 3 7V5.698c.271.202.58.378.904.525C4.978 6.711 6.427 7 8 7s3.022-.289 4.096-.777A4.92 4.92 0 0 0 13 5.698ZM14 4c0-1.007-.875-1.755-1.904-2.223C11.022 1.289 9.573 1 8 1s-3.022.289-4.096.777C2.875 2.245 2 2.993 2 4v9c0 1.007.875 1.755 1.904 2.223C4.978 15.71 6.427 16 8 16s3.022-.289 4.096-.777C13.125 14.755 14 14.007 14 13V4Zm-1 4.698V10c0 .374-.356.875-1.318 1.313C10.766 11.729 9.464 12 8 12s-2.766-.27-3.682-.687C3.356 10.875 3 10.373 3 10V8.698c.271.202.58.378.904.525C4.978 9.71 6.427 10 8 10s3.022-.289 4.096-.777A4.92 4.92 0 0 0 13 8.698Zm0 3V13c0 .374-.356.875-1.318 1.313C10.766 14.729 9.464 15 8 15s-2.766-.27-3.682-.687C3.356 13.875 3 13.373 3 13v-1.302c.271.202.58.378.904.525C4.978 12.71 6.427 13 8 13s3.022-.289 4.096-.777c.324-.147.633-.323.904-.525Z"/>
                                </svg>
                            </i>
                            <button [title]="this.selectedDatabase?.name ?? 'Select database'"
                                    data-bs-toggle="dropdown"
                                    data-bs-auto-close="outside"
                                    data-bs-popper-config='{"placement": "bottom-start", "strategy":"fixed"}'
                                    aria-expanded="false"
                                    class="btn btn-outline-secondary database-picker__selector rounded-end"
                                    #databaseSelector>
                                <span class="database-picker__selector-text">{{this.selectedDatabase?.name ?? "Select database"}}</span>
                                <i class="bi bi-chevron-compact-down ms-auto"></i>
                            </button>

                            <ul class="dropdown-menu dropdown-menu-xs database-picker__dropdown">
                                <li>
                                    <p class="dropdown-header text-center">Select database</p>
                                    <hr class="dropdown-divider my-0">
                                </li>
                                <li>
                                    <div class="input-group">
                                        <input type="text"
                                               [(ngModel)]="this.databaseSearch"
                                               class="form-control"
                                               placeholder="Search..."
                                               aria-label="Search...">
                                        <div class="input-group-append">
                                            <button [disabled]="this.isFetchingInstanceData"
                                                    class="btn btn-outline-secondary rounded-0 border-0"
                                                    type="button"
                                                    (click)="this.getDatabases()">
                                                <i *ngIf="!this.isFetchingInstanceData"
                                                   class="bi bi-search">
                                                </i>
                                                <span *ngIf="this.isFetchingInstanceData"
                                                      class="spinner-grow spinner-grow-sm"
                                                      role="status"
                                                      aria-hidden="true">
                                                </span>
                                            </button>
                                        </div>
                                    </div>
                                    <hr class="dropdown-divider mt-0">
                                </li>
                                <li *ngIf="this.databases.length > 0">
                                    <button title="Select {{database.name}}"
                                            *ngFor="let database of this.databases"
                                            class="dropdown-item"
                                            (click)="this.selectedDatabase = database">
                                        {{database.name}}
                                    </button>
                                </li>
                                <li *ngIf="this.databases.length == 0">
                                    <p class="dropdown-header text-center">Databases not found...</p>
                                </li>
                                <li>
                                    <hr class="dropdown-divider mb-0">
                                    <div class="d-flex flex-nowrap">
                                        <button [disabled]="this.isFetchingInstanceData || !this.databasesTotalAmount || !this.databasesPerPage || this.databasePage == 0"
                                                class="dropdown-item text-center"
                                                title="Previous page"
                                                (click)="this.databasePage = this.databasePage - 1">
                                            <i class="bi bi-chevron-left"></i>
                                        </button>
                                        <button [disabled]="this.isFetchingInstanceData || !this.databasesTotalAmount || !this.databasesPerPage || this.databasesTotalAmount! - (this.databasePage + 1) * this.databasesPerPage! <= 0"
                                                class="dropdown-item text-center"
                                                title="Next page"
                                                (click)="this.databasePage = this.databasePage + 1">
                                            <i class="bi bi-chevron-right"></i>
                                        </button>
                                    </div>
                                </li>
                            </ul>
                        </div>

                        <div *ngIf="this.isFetchingInstanceData && !this.selectedDatabaseTables"
                             class="text-center">
                            <div class="spinner-grow"
                                 role="status">
                                <span class="sr-only">Loading...</span>
                            </div>
                        </div>

                        <ng-container *ngIf="this.selectedDatabaseTables">
                            <hr>

                            <p class="text-center">Schema</p>

                            <ul class="schema">
                                <li *ngFor="let table of this.selectedDatabaseTables;"
                                    class="schema__item">
                                    <div class="d-flex flex-nowrap align-items-center">
                                        <div class="btn-group me-1">
                                            <button class="btn btn-outline-secondary btn-sm p-0 rounded-1 lh-1"
                                                    type="button"
                                                    title="Open actionbar"
                                                    data-bs-toggle="dropdown"
                                                    data-bs-popper-config='{"placement": "left", "strategy":"fixed"}'
                                                    aria-expanded="false">
                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                     width="12"
                                                     height="16"
                                                     fill="currentColor"
                                                     class="bi bi-three-dots-vertical"
                                                     viewBox="0 0 16 16">
                                                    <path d="M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"/>
                                                </svg>
                                            </button>

                                            <ul class="dropdown-menu dropdown-menu-xs dropstart p-0 m-0 table-dropdown">
                                                <fieldset [disabled]="this.isFetchingInstanceData || this.isExecuting">
                                                    <li>
                                                        <p class="dropdown-header pb-0 text-center">Action bar</p>
                                                        <hr class="dropdown-divider">
                                                    </li>
                                                    <li>
                                                        <button class="dropdown-item"
                                                                (click)="this.viewTable(table!.name!, false)">
                                                            Select
                                                        </button>
                                                    </li>
                                                    <li>
                                                        <button class="dropdown-item"
                                                                (click)="this.viewTable(table!.name!, true)">
                                                            Select at new tab
                                                        </button>
                                                    </li>
                                                    <li>
                                                        <button class="dropdown-item"
                                                                (click)="this.viewRowCount(table!.name!, false)">
                                                            Count
                                                        </button>
                                                    </li>
                                                    <li>
                                                        <button class="dropdown-item"
                                                                (click)="this.viewRowCount(table!.name!, true)">
                                                            Count at new tab
                                                        </button>
                                                    </li>
                                                </fieldset>

                                                <li>
                                                    <hr class="dropdown-divider">
                                                    <p class="dropdown-header py-0 text-center">Templates</p>
                                                    <hr class="dropdown-divider">
                                                </li>
                                                <li>
                                                    <button class="dropdown-item"
                                                            (click)="this.addSelectTemplate(table!.name!)">
                                                        Select rows
                                                    </button>
                                                </li>
                                                <li>
                                                    <button class="dropdown-item"
                                                            (click)="this.addUpdateTemplate(table!.name!)">
                                                        Update rows
                                                    </button>
                                                </li>
                                                <li>
                                                    <button class="dropdown-item"
                                                            (click)="this.addInsertTemplate(table!.name!)">
                                                        Insert rows
                                                    </button>
                                                </li>
                                                <li>
                                                    <button class="dropdown-item"
                                                            (click)="this.addDeleteTemplate(table!.name!)">
                                                        Delete rows
                                                    </button>
                                                </li>
                                            </ul>
                                        </div>

                                        <button (click)="table.showColumns = !table.showColumns"
                                                class="schema__item-submenu-opener">
                                            <i [ngClass]="!table.showColumns ? 'bi-chevron-compact-right' : 'bi-chevron-compact-down'"
                                               class="bi">
                                            </i>
                                        </button>

                                        <i class="bi bi-table schema__item-icon"></i>
                                        <span copied
                                              class="schema__item-name">
                                            {{table.name}}
                                        </span>
                                    </div>

                                    <ul *ngIf="(table.showColumns)">
                                        <ng-container *ngIf="!this.getFullTableSchema(table!.name!).loading; else loader">
                                            <li class="schema__item">
                                                <button (click)="submenu2.hidden = !submenu2.hidden"
                                                        class="schema__item-submenu-opener">
                                                    <i [ngClass]="submenu2.hidden ? 'bi-chevron-compact-right' : 'bi-chevron-compact-down'"
                                                       class="bi">
                                                    </i>
                                                </button>
                                                <i class="bi bi-folder schema__item-icon"></i>
                                                <span class="schema__item-name">Columns</span>

                                                <ul #submenu2
                                                    hidden>
                                                    <li *ngFor="let column of this.getFullTableSchema(table!.name!).columns"
                                                        class="schema__item">
                                                        <i class="bi bi-layout-sidebar-inset schema__item-icon"></i>
                                                        <span class="schema__item-name">
                                                            <span copied>{{column.name}}</span>
                                                        </span>
                                                        <span> - </span>
                                                        <span class="schema__item-type text-secondary">
                                                            {{this.getColumnAdditionalInfo(column)}}
                                                        </span>
                                                        <span *ngIf="column.defaultValue"> - </span>
                                                        <span *ngIf="column.defaultValue"
                                                              class="schema__item-type text-secondary">
                                                            {{column.defaultValue}}
                                                        </span>
                                                    </li>
                                                </ul>
                                            </li>
                                        </ng-container>
                                    </ul>
                                </li>
                            </ul>
                        </ng-container>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<dsv-exporter modalId="dsvModal"
              #dsvExporterComponent>
</dsv-exporter>

<app-sql-importer [database]="this.selectedDatabase?.name"
                  #sqlImporter>
</app-sql-importer>

<app-dsv-importer [database]="this.selectedDatabase?.name"
                  [tableList]="this.selectedDatabaseTables"
                  #dsvImporter>
</app-dsv-importer>

<ng-template #loader>
    <div class="d-flex justify-content-center">
        <div class="spinner-grow"
             role="status">
            <span class="sr-only">Loading...</span>
        </div>
    </div>
</ng-template>